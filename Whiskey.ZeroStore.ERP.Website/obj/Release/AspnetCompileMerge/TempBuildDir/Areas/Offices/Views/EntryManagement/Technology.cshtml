@using Whiskey.ZeroStore.ERP.Models
@using Whiskey.Utility.Data
@model Entry

<style>
    .clwid .modal-content {
        width: 800px;
    }

    #base {
        padding: 2rem;
        background: rgba(0, 0, 0, 0.2);
    }

    #userdiv {
        padding: 2rem;
        background: rgba(0, 0, 0, 0.2);
    }

    #personnelDiv {
        padding: 2rem;
        background: rgba(0, 0, 0, 0.2);
    }

    #technologyDiv {
        padding: 2rem;
        background: rgba(0, 0, 0, 0.2);
    }
</style>
<div class="personnel">
    <ul class="nav nav-tabs" role="tablist" id="navTab">
        <li role="presentation"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">基本信息</a></li>
        <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">相关证件</a></li>
        <li role="presentation"><a href="#personnel" aria-controls="personnel" role="tab" data-toggle="tab">人事</a></li>
        <li role="presentation" class="active"><a href="#technology" aria-controls="technology" role="tab" data-toggle="tab">技术</a></li>
    </ul>
    <div id="base" style="display:none">
        @Html.HiddenFor(x => x.Id, new { @class = "form-control" })
        <div class="form-group">
            <label class="control-label col-md-2">
                入职人 :
            </label>
            <div class="col-md-8">
                <div class="input-group">
                    @Html.TextBox("RealName", "", new { @class = "form-control", @readonly = "readonly" })
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                手机 :
            </label>
            <div class="col-md-8">
                <div class="input-group">
                    @Html.TextBox("MobilePhone", "", new { @class = "form-control", @readonly = "readonly" })
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                性别 :
            </label>
            <div class="col-md-8">
                <div class="input-group">
                    <input type="text" id="sexSpan" class="form-control" readonly />
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                Mac地址 :
            </label>
            <div class="col-md-8">
                <div class="input-group">
                    <input type="text" id="MacAddress" readonly class="form-control" />
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                面试评价 :
            </label>
            <div class="col-md-8">
                @*<textarea id="InterviewEvaluation" readonly style="width:90%;height:60px;"></textarea>*@
                @Html.TextAreaFor(x => x.InterviewEvaluation, new { @style = "width:90%;height:60px;" })
            </div>
        </div>
        <input type="hidden" id="MemberId" />
        @Html.HiddenFor(x => x.MemberId, new { @class = "form-control" })
    </div>
    <div id="userdiv" style="display:none">
        <div class="form-group">
            <label class="control-label col-md-2">
                银行卡:
            </label>
            <div class="col-md-8">
                <div class="dropzone-box detailImgs" id="BankcardDiv">
                    <img src="@Model.BankcardImgPath" id="BankcardImgPath" style="float:right;width:50%; margin-right: 10%;margin-top: 10%;" />
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                身份证:
            </label>
            <div class="col-md-8">
                <div class="dropzone-box detailImgs" id="IdCardDiv">
                    <img src="@Model.IdCardImgPath" id="IdCardImgPath" style="float:right;width:50%; margin-right: 10%;margin-top: 10%;" />
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                健康证:
            </label>
            <div class="col-md-8">
                <div class="dropzone-box detailImgs" id="HealthCertificateDiv">
                    <img src="@Model.HealthCertificateImgPath" id="HealthCertificateImgPath" style="float:right;width:50%;margin-right: 10%;margin-top: 10%;" />
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                照片:
            </label>
            <div class="col-md-8">
                <div class="dropzone-box detailImgs" id="PhotoDiv">
                    <img src="@Model.PhotoImgPath" id="PhotoImgPath" style="float:right;width:50%;margin-right: 10%;margin-top: 10%;" />
                </div>
            </div>
        </div>
    </div>
    <div id="personnelDiv" style="display:none">
        <div class="form-group">
            <label class="control-label col-md-2">
                部门 :
            </label>
            <div class="col-md-7">
                @Html.TextBox("DepartmentName", "", new { @class = "start-date input-sm form-control", @readonly = "readonly" })
                <input type="hidden" id="DepartmentId" />
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                职位 :
            </label>
            <div class="col-md-7">
                @Html.TextBox("JobPositionName", "", new { @class = "start-date input-sm form-control" })
                <input type="hidden" id="JobPositionId" />
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                入职时间 :
            </label>
            <div class="col-md-7">
                @Html.TextBox("EntryTime", "", new { @class = "start-date input-sm form-control", @readonly = "readonly" })
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                劳动合同:
            </label>
            <div class="col-md-8">
                <div class="dropzone-box detailImgs" id="LaborContractDiv">
                    <img src="@Model.LaborContractImgPath" id="LaborContractImgPath" style="float:right;width:50%;margin-right: 10%;margin-top: 10%;" />
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">
                简历:
            </label>
            <div class="col-md-8">
                <a href="@Model.ResumeImgPath" id="ResumeImgPath" onclick="downloadFile(this)" style="float:right;width:50%;margin-right: 10%;margin-top: 10%;"  >简历</a>
            </div>
        </div>
    </div>
    <div id="technologyDiv">

        @if (((Dictionary<int, string>)ViewBag.roles) == null || ((Dictionary<int, string>)ViewBag.roles).Count() == 0)
        {
            <span style="text-align:center">无数据……</span>
        }
        else
        {
            foreach (var item in (Dictionary<int, string>)ViewBag.roles)
            {
                <label style="margin-left:20px">
                    <input type="checkbox" name="role" value="@item.Key" />@item.Value
                </label>
            }
        }
    </div>
</div>
<link href="~/Content/Styles/Bootstrap/DateTimePicker/bootstrap-datetimepicker.min.css" rel="stylesheet" />
<script src="~/Content/Scripts/Bootstrap/DateTimePicker/bootstrap-datetimepicker.min.js"></script>
<script src="~/Content/Scripts/Bootstrap/DateTimePicker/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="~/Content/Scripts/Layout/DataHelper.js"></script>
<script type="text/javascript">
    $(function () {
        $("#navTab li").click(function () {
            //personnelDiv personnel
            if (!$(this).hasClass("active")) {
                if ($(this).find("a").attr("aria-controls") == "home") {
                    $("#base").css("display", "");
                    $("#userdiv").css("display", "none");
                    $("#personnelDiv").css("display", "none");
                    $("#technologyDiv").css("display", "none");
                }
                else if ($(this).find("a").attr("aria-controls") == "profile") {
                    $("#userdiv").css("display", "");
                    $("#base").css("display", "none");
                    $("#personnelDiv").css("display", "none");
                    $("#technologyDiv").css("display", "none");
                } else if ($(this).find("a").attr("aria-controls") == "technology") {
                    $("#userdiv").css("display", "none");
                    $("#base").css("display", "none");
                    $("#personnelDiv").css("display", "none");
                    $("#technologyDiv").css("display", "");
                }
                else {
                    $("#base").css("display", "none");
                    $("#userdiv").css("display", "none");
                    $("#personnelDiv").css("display", "");
                    $("#technologyDiv").css("display", "none");
                }
            }
        });
        var EntryTime = "@Model.EntryTime" || "";
        $("#EntryTime").val(EntryTime);

        var DepartmentId = "@Model.DepartmentId" || "";
        var JobPositionId = "@Model.JobPositionId" || "";


        $(".personnel #RealName").val("@Model.Member.RealName");
        $(".personnel #MobilePhone").val("@Model.Member.MobilePhone");
        var gender = "@Model.Member.Gender" == "0" ? "女" : "男";
        $(".personnel #sexSpan").val(gender);
        $(".personnel #MacAddress").val(("@Model.MacAddress").toUpperCase());
  

        $(".personnel #DepartmentName").val("@Model.Department.DepartmentName");
        $(".personnel #DepartmentId").val("@Model.DepartmentId");
        $(".personnel #JobPositionName").val("@Model.JobPosition.JobPositionName");
        $(".personnel #JobPositionId").val("@Model.JobPositionId");

    });

</script>
